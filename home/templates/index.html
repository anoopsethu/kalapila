<!DOCTYPE html>
<html>
<head>
	{% load staticfiles %}
	<link rel="icon" type="image/png" href="{% static 'img/kalapila-favicon.png' %}">
	<title>Kalapila</title>
	<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/main-styles.css' %}">
</head>
<body>
	<div class="container">
		<input type="text" id="search-term" name="" class="form-control">
		<input type="button" id="test-btn" value="Search" class="btn btn-primary">
		<p id="loading-message" class="hide">Loading, please wait...</p>
		<p id="items"></p>
		
	</div>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
	<script type="text/javascript">
		$("#test-btn").click(function(){
			$.ajax({
			   url: 'https://openclipart.org/search/json/?query=' + $("#search-term").val() + '&amount=10&sort=downloads',
			   data: {
			      format: 'json'
			   },
			   beforeSend: function(){
			   	  $(".search-result").remove();
			   	  $("#loading-message").removeClass("hide");
			   },
			   error: function() {
			      $('#info').html('An error has occurred');
			   },
			   dataType: 'jsonp',
			   success: function(data) {
			      console.log(data.payload.length);
			      for (var i = data.payload.length - 1; i >= 0; i--) {
			      	console.log(i);
			      	$("#items").append("<img src=" + data.payload[i].svg.url + " class='search-result hide'></img>");
			      }
			   	  $("#loading-message").addClass("hide");
			   	  $(".search-result").removeClass("hide");

			   },
			   type: 'GET'
			});
		});
	</script>
</body>
</html>